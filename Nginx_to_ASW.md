‚úÖ –ß—Ç–æ —Ç—ã —É–∂–µ —Å–¥–µ–ª–∞–ª:
–°–æ–∑–¥–∞–ª Django –ø—Ä–æ–µ–∫—Ç

–ü–µ—Ä–µ—à—ë–ª –Ω–∞ PostgreSQL –≤–º–µ—Å—Ç–æ SQLite

–û–±–µ—Ä–Ω—É–ª –≤—Å—ë –≤ Docker (web, db, nginx)

–î–æ–±–∞–≤–∏–ª Nginx –∫–∞–∫ production-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Django

–ì–æ—Ç–æ–≤–∏—à—å—Å—è –∫ –¥–µ–ø–ª–æ—é –Ω–∞ AWS ‚Äî –∏ —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥!

‚¨ÜÔ∏è –ß—Ç–æ –±—É–¥–µ—Ç –Ω–∞ —ç—Ç–∞–ø–µ –¥–µ–ø–ª–æ—è –Ω–∞ AWS
–¢—ã –º–æ–∂–µ—à—å –ø–æ–π—Ç–∏ –¥–≤—É–º—è –ø—É—Ç—è–º–∏:

üîπ –í–∞—Ä–∏–∞–Ω—Ç 1: EC2 + Docker (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é)
–¢—ã —Å–æ–∑–¥–∞—ë—à—å EC2-–∏–Ω—Å—Ç–∞–Ω—Å (–≤–∏—Ä—Ç—É–∞–ª–∫–∞)

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—à—å Docker –∏ Docker Compose

–ö–æ–ø–∏—Ä—É–µ—à—å —Ç—É–¥–∞ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (scp, rsync, –∏–ª–∏ —á–µ—Ä–µ–∑ GitHub)

–ó–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

AWS —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å–µ—Ä–≤–µ—Ä–æ–º
(Nginx ‚Üí Django ‚Üí PostgreSQL –∏–ª–∏ AWS RDS)

‚û°Ô∏è –≠—Ç–æ –≥–∏–±–∫–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

üîπ –í–∞—Ä–∏–∞–Ω—Ç 2: AWS Elastic Beanstalk (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π)
–°–µ—Ä–≤–∏—Å AWS, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç EC2-–∏–Ω—Å—Ç–∞–Ω—Å, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –∏ HTTPS

–¢—ã –ø—Ä–æ—Å—Ç–æ –∑–∞–≥—Ä—É–∂–∞–µ—à—å Dockerrun.aws.json –∏–ª–∏ docker-compose.yml

AWS —Å–∞–º –ø–æ–¥–Ω–∏–º–∞–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å —Ç–≤–æ–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º

‚û°Ô∏è –≠—Ç–æ –ø—Ä–æ—â–µ, –Ω–æ –≥–∏–±–∫–æ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞

‚ùó –ê –∫–∞–∫ –±—ã—Ç—å —Å pgAdmin?
pgAdmin –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–∑—ã.
–ï—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å AWS RDS (–±–∞–∑—É –Ω–∞ AWS), —Ç—ã –º–æ–∂–µ—à—å:

–ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –Ω–µ–π —á–µ—Ä–µ–∑ pgAdmin –ª–æ–∫–∞–ª—å–Ω–æ

–ò–ª–∏ —á–µ—Ä–µ–∑ pgAdmin –≤ Docker (–∫–∞–∫ —Ç—ã —Ö–æ—á–µ—à—å —Å–µ–π—á–∞—Å)

üí° –ê —á—Ç–æ —Å Nginx –∏ AWS?
–¢–≤–æ–π Nginx:

—Å–µ–π—á–∞—Å –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ Django

–±—É–¥–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ AWS, –µ—Å–ª–∏ —Ç—ã —Ä–∞–∑–≤–µ—Ä–Ω—ë—à—å –≤—Å—ë –≤ Docker –Ω–∞ EC2

üìå –í–∞–∂–Ω–æ: Nginx –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ PostgreSQL –∏–ª–∏ AWS.
–û–Ω –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ HTTP-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∫ Django.

‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?
–†–∞–∑ —Ç—ã —Ö–æ—á–µ—à—å –≤—ã–π—Ç–∏ –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø ‚Äî –¥–µ–ø–ª–æ–π –Ω–∞ AWS ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é:

–ó–∞–∫–æ–Ω—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É pgAdmin –≤ Docker (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞)

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å nginx.conf –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è production

–°–æ–∑–¥–∞—Ç—å EC2-–∏–Ω—Å—Ç–∞–Ω—Å

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ AWS

–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø–æ–º–æ—â—å—é Docker Compose

(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RDS (PostgreSQL –Ω–∞ AWS) –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ db

–•–æ—á–µ—à—å —Å–µ–π—á–∞—Å:

–î–æ–Ω–∞—Å—Ç—Ä–æ–∏–º pgAdmin —á–µ—Ä–µ–∑ Nginx?

–ò–ª–∏ –Ω–∞—á–Ω—ë–º —Å—Ä–∞–∑—É –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ –¥–µ–ø–ª–æ—é –Ω–∞ AWS (—Å–æ–∑–¥–∞–Ω–∏–µ EC2, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è)?






–í—ã —Å–∫–∞–∑–∞–ª–∏:
–î–∞–≤–∞–π –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–ª–∞—Ç—å –ø–æ –ø–æ—Ä—è–¥–∫—É, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º
ChatGPT —Å–∫–∞–∑–∞–ª:
–û—Ç–ª–∏—á–Ω–æ, —à–∞–≥ –∑–∞ —à–∞–≥–æ–º ‚Äî —ç—Ç–æ —Å–∞–º—ã–π –≤–µ—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥ üëç
–ù–∞—á–Ω—ë–º —Å —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –∏ –±—É–¥–µ–º –∏–¥—Ç–∏ –ø–æ –Ω–µ–º—É –ø–æ—ç—Ç–∞–ø–Ω–æ.

üìã –ü–ª–∞–Ω —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è Django-–ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ AWS —á–µ—Ä–µ–∑ Docker –∏ Nginx
‚úÖ –®–∞–≥ 1. –ü–æ–ª–Ω–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:
‚òë Django
‚òë PostgreSQL
‚òë Docker
‚òë Nginx
üî≤ pgAdmin

üü© –®–∞–≥ 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pgAdmin –≤ Docker (—Ç–µ–∫—É—â–∏–π —à–∞–≥)
üü© –®–∞–≥ 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ nginx.conf –ø–æ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
üü© –®–∞–≥ 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ .env (–≤—ã–Ω–µ—Å–µ–º –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–µ –∑–∞–±—É–¥–µ–º DEBUG=False)
üü© –®–∞–≥ 5. –°–æ–∑–¥–∞–Ω–∏–µ AWS EC2 –∏–Ω—Å—Ç–∞–Ω—Å–∞ (Ubuntu, –Ω–∞–ø—Ä–∏–º–µ—Ä)
üü© –®–∞–≥ 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose –Ω–∞ EC2
üü© –®–∞–≥ 7. –ü–µ—Ä–µ–Ω–æ—Å –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—á–µ—Ä–µ–∑ scp, git, –∏–ª–∏ GitHub Actions)
üü© –®–∞–≥ 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–æ–≤, SSL –∏ —Ç.–ø.)
üü© –®–∞–≥ 9. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ AWS RDS)
üü© –®–∞–≥ 10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫

üü¢ –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pgAdmin —á–µ—Ä–µ–∑ Docker (–≤–Ω—É—Ç—Ä–∏ docker-compose.yml)
–î–æ–ø–æ–ª–Ω–∏–º —Ç–≤–æ–π docker-compose.yml, –Ω–µ —Ç—Ä–æ–≥–∞—è –¥—Ä—É–≥–∏–µ —Ä–∞–±–æ—á–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

yaml

pgadmin:
    image: dpage/pgadmin4
    container_name: pgadmin
    restart: unless-stopped
    ports:
      - "5050:80"
    env_file:
      - .env
    environment:
      PGADMIN_DEFAULT_EMAIL: ${PGADMIN_EMAIL}
      PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_PASSWORD}
    volumes:
      - pgadmin_data:/var/lib/pgadmin
    depends_on:
      - db
üóÇÔ∏è # –î–æ–±–∞–≤–∏–º volume –¥–ª—è pgAdmin –≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü yaml

volumes:
  postgres_data:
  static_volume:
  media_volume:
  pgadmin_data:

üìÅ –ü—Ä–∏–º–µ—Ä .env —Å –Ω—É–∂–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
env

PG_NAME=your_db_name
PG_USER=your_db_user
PG_PASSWORD=your_db_password

PGADMIN_EMAIL=admin@example.com
PGADMIN_PASSWORD=supersecret
‚ñ∂Ô∏è –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
docker-compose up --build
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
üëâ http://localhost:5050

–í–æ–π—Ç–∏ –º–æ–∂–Ω–æ –ø–æ PGADMIN_EMAIL –∏ PGADMIN_PASSWORD.
–ó–∞—Ç–µ–º –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–æ–±–∞–≤—å —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é:

Name: Local PostgreSQL

Host name/address: db

Port: 5432

Username: ${PG_USER}

Password: ${PG_PASSWORD}

üü© –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –ø–æ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
–°–µ–π—á–∞—Å –º—ã:

–ü–æ–¥–≥–æ—Ç–æ–≤–∏–º nginx.conf –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–ù–∞—Å—Ç—Ä–æ–∏–º –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Gunicorn —á–µ—Ä–µ–∑ web

–£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Å—Ç–∞—Ç–∏–∫–∞ –∏ –º–µ–¥–∏–∞ —Ä–∞–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º):
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
project_root/
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ nginx.conf           üëà —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ entrypoint.sh
‚îú‚îÄ‚îÄ wait-for-db.sh
‚îú‚îÄ‚îÄ manage.py
‚îú‚îÄ‚îÄ your_django_project/
‚îî‚îÄ‚îÄ ...
üìÑ –ü—Ä–∏–º–µ—Ä nginx.conf (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ø–æ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω):
nginx
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
worker_processes 1;

events {
    worker_connections 1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    upstream django {
        server web:8000;  # –ò–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ docker-compose
    }

    server {
        listen 80;

        server_name localhost;

        location / {
            proxy_pass http://django;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        location /static/ {
            alias /app/staticfiles/;
        }

        location /media/ {
            alias /app/media/;
        }

        error_log  /var/log/nginx/error.log warn;
        access_log /var/log/nginx/access.log;
    }
}
‚úÖ –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ docker-compose.yml nginx –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ volume‚Äô–∞–º:

yaml
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    depends_on:
      - web
üìå –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ static_volume –∏ media_volume –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –≤ web:
yaml
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
  web:
    ...
    volumes:
      - static_volume:/app/staticfiles
      - media_volume:/app/media
‚úÖ –ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
docker-compose down
docker-compose up --build
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

–ü–µ—Ä–µ–π–¥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://localhost

–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

–ò —á—Ç–æ —Å—Ç–∞—Ç–∏–∫–∞ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, main.css –∏–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

üéâ –ì–æ—Ç–æ–≤–æ!

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–ª–µ–¥—É—é—â–∏–º –±—É–¥–µ—Ç –®–∞–≥ 4: .env –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º–∞ Django (DEBUG=False, ALLOWED_HOSTS –∏ —Ç.–¥.).
–ì–æ—Ç–æ–≤ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É?






–í—ã —Å–∫–∞–∑–∞–ª–∏:
–î–∞, —è –≤—Å–µ –≤—ã–ø–æ–ª–Ω–∏–ª, –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç Nginx. –ò–¥–µ–º –¥–∞–ª—å—à–µ


ChatGPT —Å–∫–∞–∑–∞–ª:
–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üëè –†–∞–∑ Nginx —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–≤–æ–π Django-–ø—Ä–æ–µ–∫—Ç ‚Äî –º—ã –ø–æ—á—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –®–∞–≥—É 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django –ø–æ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω.

üü© –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
–ß—Ç–æ–±—ã Django —Ä–∞–±–æ—Ç–∞–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å—Ä–µ–¥–µ, –Ω—É–∂–Ω–æ:

‚úÖ 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEBUG=False
‚úÖ 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ALLOWED_HOSTS
‚úÖ 3. –£–∫–∞–∑–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø—É—Ç–∏ –∫ —Å—Ç–∞—Ç–∏–∫–∞–º –∏ –º–µ–¥–∏–∞
‚úÖ 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —á–µ—Ä–µ–∑ .env
üîß 1. –í .env –¥–æ–±–∞–≤—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
–ü—Ä–∏–º–µ—Ä .env:

env
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
DEBUG=0
DJANGO_SECRET_KEY=your-very-secret-key
ALLOWED_HOSTS=localhost,127.0.0.1
üõ† 2. –í settings.py –∏—Å–ø–æ–ª—å–∑—É–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç—ã —á–∏—Ç–∞–µ—à—å .env, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ os.environ:

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
import os

DEBUG = os.environ.get('DEBUG') == '1'

SECRET_KEY = os.environ.get('DJANGO_SECRET_KEY', 'changeme-in-prod')

ALLOWED_HOSTS = os.environ.get('ALLOWED_HOSTS', 'localhost').split(',')
üìÇ 3. –£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ —Å—Ç–∞—Ç–∏–∫–∞–º/–º–µ–¥–∏–∞
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')

MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
‚ö†Ô∏è 4. –°–æ–±–µ—Ä–∏ —Å—Ç–∞—Ç–∏–∫—É –∑–∞–Ω–æ–≤–æ:
–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É –≤–Ω—É—Ç—Ä–∏ web-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
docker-compose exec web python manage.py collectstatic --noinput
üîÅ 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
docker-compose down
docker-compose up --build
‚úÖ –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

–û—Ç–∫—Ä–æ–π —Å–∞–π—Ç –Ω–∞ http://localhost

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

–£–±–µ–¥–∏—Å—å, —á—Ç–æ Debug Toolbar –∏—Å—á–µ–∑ (–µ—Å–ª–∏ –æ–Ω –±—ã–ª)

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ collectstatic –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª —Ñ–∞–π–ª—ã –≤ /app/staticfiles –∏ –æ–Ω–∏ –æ—Ç–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Nginx

–ì–æ—Ç–æ–≤? –°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –±—É–¥–µ—Ç –®–∞–≥ 5: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ AWS –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ EC2-—Å–µ—Ä–≤–µ—Ä–∞.
–ü–µ—Ä–µ—Ö–æ–¥–∏–º?






–í—ã —Å–∫–∞–∑–∞–ª–∏:
–ü–æ—Å–º–æ—Ç—Ä–∏ –º–æ–π .env:'SECRET_KEY=django-insecure-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
DEBUG=True
DJANGO_ADMIN_USER=admin
DJANGO_ADMIN_EMAIL=admin@example.com
DJANGO_ADMIN_PASSWORD=admin

EMAIL_HOST='smtp.gmail.com'
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=af3557771@gmail.com
EMAIL_HOST_PASSWORD=xxxx xxxx xxxx xxxx 
DEFAULT_FROM_EMAIL=af3557771@gmail.com

PG_NAME=itg
PG_USER=postgres
PG_PASSWORD=admin
PG_HOST=localhost
PG_PORT=5432

CLIENT_ID=xxxxxxxxxxxxxxxxxxxxx 
SICRET_CLIENT=xxxxxxxxxxxxxxxxxxxxxxxxxx


ChatGPT —Å–∫–∞–∑–∞–ª:
–°–ø–∞—Å–∏–±–æ, .env –≤—ã–≥–ª—è–¥–∏—Ç —Ö–æ—Ä–æ—à–æ, –Ω–æ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å—Ç–æ–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ. –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —ç—Ç–æ —à–∞–≥ –∑–∞ —à–∞–≥–æ–º, —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—Ç—É.

‚úÖ 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Å–∫—Ä–æ–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–§–∞–π–ª .env –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ git. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ .gitignore –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
.env
‚úÖ 2. –ü—Ä–æ–¥–∞–∫—à–µ–Ω-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–¢—ã —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—à—å —Å DEBUG=True, –∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

env
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
DEBUG=False
ALLOWED_HOSTS=127.0.0.1,localhost
–ü–æ–∑–∂–µ, –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –Ω–∞ AWS, –º—ã —Å—é–¥–∞ –¥–æ–±–∞–≤–∏–º –≤–Ω–µ—à–Ω–∏–π IP –∏–ª–∏ –¥–æ–º–µ–Ω.

‚úÖ 3. –£–ª—É—á—à–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
–í–æ—Ç –∫–∞–∫ –ª—É—á—à–µ –æ—Ñ–æ—Ä–º–∏—Ç—å .env (—É–±—Ä–∞–ª –ª–∏—à–Ω–∏–µ –∫–∞–≤—ã—á–∫–∏, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–ª —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ):

env
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
SECRET_KEY=django-insecure-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
DEBUG=False
ALLOWED_HOSTS=127.0.0.1,localhost

DJANGO_ADMIN_USER=admin
DJANGO_ADMIN_EMAIL=admin@example.com
DJANGO_ADMIN_PASSWORD=admin

EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=af3557771@gmail.com
EMAIL_HOST_PASSWORD=***your-app-password***
DEFAULT_FROM_EMAIL=af3557771@gmail.com

PG_NAME=itg
PG_USER=postgres
PG_PASSWORD=admin
PG_HOST=db
PG_PORT=5432

CLIENT_ID=***hidden***
SICRET_CLIENT=***hidden***
üìå –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è	–ò–∑–º–µ–Ω–µ–Ω–∏–µ	–ü—Ä–∏—á–∏–Ω–∞
DEBUG=False	–ë—ã–ª–æ True	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—à–∏–±–∫–∏
PG_HOST=db	–ë—ã–ª–æ localhost	db ‚Äî —ç—Ç–æ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑ Docker Compose
ALLOWED_HOSTS	–î–æ–±–∞–≤–ª–µ–Ω–æ	–ù—É–∂–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
–£–±—Ä–∞–Ω—ã –∫–∞–≤—ã—á–∫–∏	–ë—ã–ª–æ 'smtp.gmail.com'	–í .env –∫–∞–≤—ã—á–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã

‚úÖ 4. –í Django settings.py –ø–æ–¥–∫–ª—é—á–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–ü—Ä–∏–º–µ—Ä:

python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
import os

SECRET_KEY = os.environ.get("SECRET_KEY")
DEBUG = os.environ.get("DEBUG") == "True"
ALLOWED_HOSTS = os.environ.get("ALLOWED_HOSTS", "").split(",")

EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = os.environ.get("EMAIL_HOST")
EMAIL_PORT = int(os.environ.get("EMAIL_PORT", 587))
EMAIL_USE_TLS = os.environ.get("EMAIL_USE_TLS") == "True"
EMAIL_HOST_USER = os.environ.get("EMAIL_HOST_USER")
EMAIL_HOST_PASSWORD = os.environ.get("EMAIL_HOST_PASSWORD")
DEFAULT_FROM_EMAIL = os.environ.get("DEFAULT_FROM_EMAIL")
‚úÖ –ö–æ–≥–¥–∞ –ø–æ–ø—Ä–∞–≤–∏—à—å .env –∏ settings.py ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
docker-compose down
docker-compose up --build
–ì–æ—Ç–æ–≤? –¢–æ–≥–¥–∞ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –±—É–¥–µ—Ç:

üëâ –®–∞–≥ 5: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è AWS –∏ –∑–∞–ø—É—Å–∫ EC2-—Å–µ—Ä–≤–µ—Ä–∞
–•–æ—á–µ—à—å –ø–µ—Ä–µ–π—Ç–∏ –∫ –Ω–µ–º—É?






–í—ã —Å–∫–∞–∑–∞–ª–∏:
–ü—Ä–æ–≤–µ—Ä—å –º–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ settings.py: '"""
Django settings for firstproject project.

Generated by 'django-admin startproject' using Django 5.1.5.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.1/ref/settings/
"""

import os
from pathlib import Path
from dotenv import load_dotenv
from django.conf.global_settings import AUTHENTICATION_BACKENDS
from django.conf.global_settings import LOGIN_URL

# –£–º–µ–Ω—å—à–∞–µ–º –¥–ª–∏–Ω—É –∏–º–µ–Ω–∏ –≤ –º–µ–Ω—é
def get_short_username(user):
    return user.username[:10] + '...' if len(user.username) > 10 else user.username

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

# ======================== –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ========================
SECRET_KEY = os.environ.get('SECRET_KEY')
DEBUG = os.environ.get("DEBUG") == "True"
ALLOWED_HOSTS = os.environ.get("ALLOWED_HOSTS", "").split(",")
INTERNAL_IPS = ['127.0.0.1']

# ======================== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ========================
INSTALLED_APPS = [
    'jazzmin',

    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.sites',

    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.github',

    'django_extensions',
    'debug_toolbar',

    'users.apps.UsersConfig',
    'news.apps.NewsConfig',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
    'allauth.account.middleware.AccountMiddleware',
]

# ======================== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤ ========================
TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [BASE_DIR / "templates"],
        "APP_DIRS": True,
        "OPTIONS": {
            "context_processors": [
                'django.template.context_processors.debug',
                "django.template.context_processors.request",
                "django.contrib.auth.context_processors.auth",
                "django.contrib.messages.context_processors.messages",
                "news.context_processors.global_context",
                "users.context_processors.socialaccount_providers",
                "users.context_processors.user_profile",
            ],
        },
    },
]

# ======================== –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Jazzmin ========================
JAZZMIN_SETTINGS = {
    "site_title": "Info to Go Admin",
    "site_header": "ITG: Admin",
    "site_brand": "Info to Go",
    "welcome_sign": "Welcome to ITG: Admin",
    "copyright": "ITG GmbH",

    # –ó–∞–º–µ–Ω—è–µ–º –ª—è–º–±–¥–∞-—Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
    "user_avatar": "avatars/default-avatar.png",  # –°—Ç–∞—Ç–∏—á–Ω—ã–π –ø—É—Ç—å –∫ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º—É –∞–≤–∞—Ç–∞—Ä—É

    # –£–ø—Ä–æ—â–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Å—ã–ª–∫–∏
    "custom_links": {
        "auth": [{
            "name": "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å",  # –ó–∞–º–µ–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ —Å—Ç—Ä–æ–∫—É
            "url": "news:profile",  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è URL-–º–∞—Ä—à—Ä—É—Ç–∞
            "icon": "fas fa-user",
        }]
    },

    "topmenu_links": [
        {"name": "Home", "url": "admin:index", "permissions": ["auth.view_user"]},
        {"name": "Support", "url": "https://google.com", "new_window": True},
    ],
    "usermenu_links": [
        {"name": "Support", "url": "https://github.com/farridav/django-jazzmin/issues", "new_window": True},
        {"model": "auth.user"}
    ],
    "show_sidebar": True,
    "navigation_expanded": True,
    "hide_apps": [],
    "hide_models": [],
    "default_icon_parents": "fas fa-chevron-circle-right",
    "default_icon_children": "fas fa-circle",
    "related_modal_active": False,
    "custom_css": None,
    "custom_js": None,
    "use_google_fonts_cdn": True,
    "show_ui_builder": True,

    # –î–æ–±–∞–≤–ª—è–µ–º —è–≤–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–µ–Ω—é
    "order_with_respect_to": [
        "auth",
        "news",
        "users",
    ],
}

JAZZMIN_UI_TWEAKS = {
    "navbar_small_text": False,
    "footer_small_text": False,
    "body_small_text": True,
    "brand_small_text": False,
    "brand_colour": "navbar-secondary",
    "accent": "accent-pink",
    "navbar": "navbar-danger navbar-dark",
    "no_navbar_border": False,
    "navbar_fixed": True,
    "layout_boxed": False,
    "footer_fixed": False,
    "sidebar_fixed": True,
    "sidebar": "sidebar-light-primary",
    "sidebar_nav_small_text": False,
    "sidebar_disable_expand": False,
    "sidebar_nav_child_indent": False,
    "sidebar_nav_compact_style": True,
    "sidebar_nav_legacy_style": False,
    "sidebar_nav_flat_style": True,
    "theme": "cyborg",
    "dark_mode_theme": "cyborg",
    "button_classes": {
        "primary": "btn-primary",
        "secondary": "btn-secondary",
        "info": "btn-info",
        "warning": "btn-warning",
        "danger": "btn-danger",
        "success": "btn-success"
    }
}

# ======================== –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ========================
ROOT_URLCONF = 'firstproject.urls'
WSGI_APPLICATION = 'firstproject.wsgi.application'

# Database
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': os.getenv('PG_NAME'),
        'USER': os.getenv('PG_USER'),
        'PASSWORD': os.getenv('PG_PASSWORD'),
        'HOST': os.getenv('PG_HOST'),
        'PORT': os.getenv('PG_PORT'),
    }
}

# Password validation
AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]

# Internationalization
LANGUAGE_CODE = 'ru-ru'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

# Static files
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')
MEDIA_URL = '/media/'
# MEDIA_ROOT = BASE_DIR / 'media'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# Authentication
AUTHENTICATION_BACKENDS = [
    'django.contrib.auth.backends.ModelBackend',
    'users.authentication.EmailAuthBackend',
    'allauth.account.auth_backends.AuthenticationBackend',
]

SITE_ID = 1
LOGIN_URL = '/accounts/login/'
LOGIN_REDIRECT_URL = '/'
ACCOUNT_LOGOUT_REDIRECT_URL = '/accounts/login/'

# Allauth settings
# ACCOUNT_EMAIL_REQUIRED = True # –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑—É—é ACCOUNT_LOGIN_METHODS = {'email'}
ACCOUNT_LOGIN_METHODS = {'email'}
ACCOUNT_EMAIL_VERIFICATION = "mandatory"
# ACCOUNT_AUTHENTICATION_METHOD = "email" # –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑—É—é ACCOUNT_LOGIN_METHODS = {'email'}
ACCOUNT_LOGIN_METHODS = {'email'}
# ACCOUNT_USERNAME_REQUIRED = False # –º–µ—Ç–æ–¥ —É—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑—É—é ACCOUNT_SIGNUP_FIELDS = ['email*', 'password1*', 'password2*']
ACCOUNT_SIGNUP_FIELDS = ['email*', 'password1*', 'password2*']
ACCOUNT_USER_MODEL_USERNAME_FIELD = None
ACCOUNT_EMAIL_CONFIRMATION_EXPIRE_DAYS = 3
ACCOUNT_EMAIL_CONFIRMATION_HMAC = True
ACCOUNT_EMAIL_CONFIRMATION_AUTHENTICATED_REDIRECT_URL = "/"
ACCOUNT_LOGIN_ON_EMAIL_CONFIRMATION = True
ACCOUNT_FORMS = {'signup': 'users.forms.CustomSignupForm'}

# Email
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = os.environ.get("EMAIL_HOST")
EMAIL_PORT = int(os.environ.get('EMAIL_PORT', 587))
EMAIL_USE_TLS = os.environ.get("EMAIL_USE_TLS") == "True"
EMAIL_HOST_USER = os.environ.get("EMAIL_HOST_USER")
EMAIL_HOST_PASSWORD = os.environ.get("EMAIL_HOST_PASSWORD")
DEFAULT_FROM_EMAIL = os.environ.get("DEFAULT_FROM_EMAIL")

# Sessions
SESSION_ENGINE = 'django.contrib.sessions.backends.db'
SESSION_COOKIE_AGE = 1209600  # 2 –Ω–µ–¥–µ–ª–∏
SESSION_SAVE_EVERY_REQUEST = True

# Social auth
SOCIALACCOUNT_PROVIDERS = {
    'github': {
        'SCOPE': ['user:email'],
        'AUTH_PARAMS': {'access_type': 'online'},
    }
}'


ChatGPT —Å–∫–∞–∑–∞–ª:
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ settings.py –∏ .env –≤ —Ü–µ–ª–æ–º –≤—ã–≥–ª—è–¥—è—Ç —Ö–æ—Ä–æ—à–æ, –æ–¥–Ω–∞–∫–æ —è –Ω–∞—à—ë–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–∞–≤–∏—Ç—å –∏–ª–∏ —É—Ç–æ—á–Ω–∏—Ç—å:

‚úÖ –ß—Ç–æ —É–∂–µ —Ö–æ—Ä–æ—à–æ:
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è dotenv –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Äî –æ—Ç–ª–∏—á–Ω–æ.

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ DATABASES, EMAIL –∏ Jazzmin.

–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã allauth, debug_toolbar, django_extensions, custom backends.

–£–∫–∞–∑–∞–Ω STATIC_ROOT, MEDIA_ROOT, DEFAULT_FROM_EMAIL ‚Äî üëç

‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. üîí EMAIL_HOST_PASSWORD ‚Äî –æ–±—Ä–µ–∑–∞–Ω / –∫–∞–≤—ã—á–∫–∏
–í .env —Ç—ã —É–∫–∞–∑–∞–ª:

env
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
EMAIL_HOST_PASSWORD=xxxx xxxx xxxx xxxx 
–ü—Ä–æ–±–ª–µ–º–∞: –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å Gmail —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω, –æ–Ω —á–∞—Å—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª—ã. –≠—Ç–æ –æ–ø–∞—Å–Ω–æ –∏ –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ —Å –∫–∞–≤—ã—á–∫–∞–º–∏ 'smtp.gmail.com'.

# –†–µ—à–µ–Ω–∏–µ:

–£–±–µ—Ä–∏ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –∏–∑ .env:

env

EMAIL_HOST=smtp.gmail.com
–û–±–µ—Ä–Ω–∏ –ø–∞—Ä–æ–ª—å –≤ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–µ–ª—ã:

env

EMAIL_HOST_PASSWORD="abcd efgh ijkl mnop"
# 2. Ô∏è DEBUG = "True" –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞
python
DEBUG = os.environ.get("DEBUG") == "True"
# –≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–æ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ:

python

DEBUG = os.environ.get("DEBUG", "False").lower() in ("true", "1")
# 3. ‚ö†Ô∏è ALLOWED_HOSTS –ø—É—Å—Ç–æ–π
python

ALLOWED_HOSTS = os.environ.get("ALLOWED_HOSTS", "").split(",")
–ï—Å–ª–∏ –≤ .env –Ω–µ —É–∫–∞–∑–∞–Ω–æ ALLOWED_HOSTS, —ç—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Å–ø–∏—Å–æ–∫ [""] ‚Äî —á—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –Ω–µ—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º —Ö–æ—Å—Ç–∞–º.

–≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É DisallowedHost.

# ‚úÖ –†–µ—à–µ–Ω–∏–µ:

–í .env –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å:

ALLOWED_HOSTS=127.0.0.1,localhost
# 4. üìõ –û–ø–µ—á–∞—Ç–∫–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π: SICRET_CLIENT
env

SICRET_CLIENT=...
–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: SECRET_CLIENT

–ï—Å–ª–∏ —Ç—ã —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ ‚Äî –ø–æ–ø—Ä–∞–≤—å –∏ –≤ settings.py —Ç–æ–∂–µ.

# 5. üîÑ –ü–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è ACCOUNT_LOGIN_METHODS
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
ACCOUNT_LOGIN_METHODS = {'email'}
ACCOUNT_LOGIN_METHODS = {'email'}
–ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.

# 6. üì§ Gmail –∏ 2FA
–ï—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Gmail ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:

–í–∫–ª—é—á–∏ 2FA –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ.

–ò—Å–ø–æ–ª—å–∑—É–π –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

# ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –°–æ–≤–µ—Ç—ã –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
–í—ã–Ω–µ—Å–∏ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ settings.py –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª .env.example (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö), —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–º.

–î–æ–±–∞–≤—å .env –≤ .gitignore, –µ—Å–ª–∏ –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–∏–ª!

# üí° –ü—Ä–æ–≤–µ—Ä—å email –æ—Ç–ø—Ä–∞–≤–∫—É
–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ EMAIL-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:

bash

–∑–∞–ø—É—Å–∫–∞–µ–º 
python manage.py shell

from django.core.mail import send_mail
send_mail('Test', 'This is test message', 'af3557771@gmail.com', ['YOUR@EMAIL.COM'], fail_silently=False)
–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, Gmail –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–∏—Å—å–º–æ. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –±—É–¥–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π.